(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ccebea66"],{"4e107":function(t,e,n){"use strict";var r=n("7b75"),o=n.n(r);o.a},"7b75":function(t,e,n){},9760:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),n("el-breadcrumb-item",[t._v("AIP监控")]),n("el-breadcrumb-item",[t._v("监控列表")])],1),n("el-card",[n("div",[n("MonitorHandSearch",{attrs:{findMonitorBody:t.findMonitorBody}})],1),n("div",[n("MonitorTable",{attrs:{data:t.monitorList}})],1)])],1)},o=[],i=(n("96cf"),n("1da1")),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-row",{attrs:{gutter:30}},[n("el-col",{attrs:{span:5}},[n("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入jobName",clearable:""},on:{clear:t.getMonitorList},model:{value:t.findMonitorBody.monitorName,callback:function(e){t.$set(t.findMonitorBody,"monitorName",e)},expression:"findMonitorBody.monitorName"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.getMonitorList},slot:"append"})],1)],1),n("el-col",{attrs:{span:10}},[n("el-button",{attrs:{plain:""},on:{click:function(e){t.addDialogVisible=!0,t.getMonitorGroups()}}},[t._v("添加单个API监控")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addManyDialogVisible=!0}}},[t._v("添加多个API监控")])],1)],1)},s=[],l={props:{findMonitorBody:{}},data:function(){return{}},methods:{}},c=l,u=n("2877"),d=Object(u["a"])(c,a,s,!1,null,"157ffcc1",null),p=d.exports,m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-table",{attrs:{border:"",data:t.monitorList}},[n("el-table-column",{attrs:{width:"50px",label:"ID",prop:"id"}}),n("el-table-column",{attrs:{label:"jobId",prop:"jobId"}}),n("el-table-column",{attrs:{label:"jobName"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-link",{attrs:{type:"primary"}},[t._v(t._s(e.row.jobName))])]}}])}),n("el-table-column",{attrs:{label:"系统名称",prop:"httpSystem"}}),n("el-table-column",{attrs:{label:"API名称",prop:"httpName"}}),n("el-table-column",{attrs:{label:"类型",prop:"type"},scopedSlots:t._u([{key:"default",fn:function(e){return[0===e.row.type?n("font",[t._v("单个api")]):n("font",[t._v("多个api")])]}}])}),n("el-table-column",{attrs:{label:"备注",width:"80px",prop:"remark"}}),n("el-table-column",{attrs:{label:"监控表达式",width:"80px",prop:"jobCron"}}),n("el-table-column",{attrs:{label:"监控状态",width:"80px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"apiStatus"},[e.row.enabled?n("font",{staticClass:"apiActive",attrs:{color:"#67C23A"}},[t._v(" 启动中 ")]):n("font",{staticClass:"apiNoActive",attrs:{color:"#F56C6C"}},[t._v(" 未启动 ")])],1)]}}])}),n("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改",placement:"top"}},[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini",ricon:"el-icon-edit",circle:""},on:{click:function(n){return t.showEditDialog(e.row.jobId)}}})],1),1===e.row.enabled?n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"暂停",placement:"top"}},[n("el-button",{attrs:{type:"danger",icon:"el-icon-switch-button",size:"mini",circle:""},on:{click:function(n){return t.enableMonitor(e)}}})],1):n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"执行",placement:"top"}},[n("el-button",{attrs:{type:"success",icon:"el-icon-caret-right",size:"mini",circle:""},on:{click:function(n){return t.enableMonitor(e)}}})],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看日志",placement:"top"}},[n("el-button",{attrs:{type:"warning",icon:"el-icon-chat-line-square",size:"mini",circle:""}})],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"top"}},[n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini",circle:""}})],1)]}}])})],1)},b=[],h={data:function(){return{findMonitorBody:{monitorName:"",pageNum:1,pageSize:10},total:0,monitorList:{}}},created:function(){this.getMonitorList()},methods:{getMonitorList:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$api.monitor.monitorList(this.findMonitorBody);case 2:if(e=t.sent,n=e.data,console.log(n),200===n.code){t.next=7;break}return t.abrupt("return",this.$message.error("获取监控列表失败！"));case 7:this.monitorList=n.data.monitor,this.total=n.data.total;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleSizeChange:function(t){this.findMonitorBody.pageSize=t,this.getMonitorList()},handleCurrentChange:function(t){this.findMonitorBody.pageNum=t,this.getMonitorList()},enableMonitor:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e,"scope"),1===e.row.enabled?this.enableMonitorBody.enabled=0:this.enableMonitorBody.enabled=1,this.enableMonitorBody.jobId=e.row.jobId,t.next=5,this.$api.monitor.enableMonitorApi(this.enableMonitorBody);case 5:if(n=t.sent,r=n.data,console.log(r),200!==r.code){t.next=11;break}return this.getMonitorList(),t.abrupt("return",this.$message.success("修改成功！"));case 11:return t.abrupt("return",this.$message.error("修改失败！"));case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},f=h,g=(n("4e107"),Object(u["a"])(f,m,b,!1,null,"84bdb9be",null)),y=g.exports,M={name:"MonitorList",components:{MonitorHandSearch:p,MonitorTable:y},data:function(){return{findMonitorBody:{monitorName:"",pageNum:1,pageSize:10},total:0,monitorList:{},postmanTableHead:[{column_name:"mobile",column_comment:"API类型"},{column_name:"name",column_comment:"API地址"},{column_name:"nickName",column_comment:"概况"}],postmanApiList:[{name:"name",nickName:"nickName",mobile:"mobile"}],addRulesMonitorForm:{systemName:[{required:!0}],jobName:[{required:!0,message:"请输入Job名称",trigger:"blur"}],httpName:[{required:!0,message:"请输入api名称",trigger:"blur"}],httpMethod:[{required:!0}],httpUrl:[{required:!0,message:"请输入api地址",trigger:"blur"}],jobCron:[{required:!0,trigger:"blur"}],conditionType:[{required:!0,trigger:"blur"}],conditionBody:[{required:!0,trigger:"blur"}]},radioApiType:"0",radioApiTime:"0/15 * * * * ?",apiConditionType:"0",apiCondition:"",addDialogVisible:!1,addManyDialogVisible:!1,options:[],select:[],createApi:{systemName:"",jobName:"",httpName:"",type:"",remark:"",jobCron:"",httpUrl:"",httpMethod:"",httpHeaders:"",httpBody:"",conditionType:"",conditconditionBodyion:""},groupsList:{},enableMonitorBody:{jobId:"",enabled:""}}},created:function(){},methods:{addDialogClosed:function(){this.$refs.addApiFormRef.resetFields()},addManyDialogClosed:function(){this.$refs.addApiFormRef.resetFields()},addSingleApi:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.createApi.type="0",this.createApi.httpMethod=this.radioApiType,this.createApi.jobCron=this.radioApiTime,t.next=5,this.$api.monitor.saveSingle(this.createApi);case 5:if(e=t.sent,n=e.data,200===n.code){t.next=9;break}return t.abrupt("return",this.$message.error("新增失败！"));case 9:this.addDialogVisible=!1;case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getMonitorGroups:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$api.monitor.getMonitorGroupsApi();case 2:e=t.sent,n=e.data,this.groupsList=n.data;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addMonitorGroups:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$api.monitor.getMonitorGroupsApi();case 2:e=t.sent,n=e.data,this.groupsList=n.data;case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),enableMonitor:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e,"scope"),1===e.row.enabled?this.enableMonitorBody.enabled=0:this.enableMonitorBody.enabled=1,this.enableMonitorBody.jobId=e.row.jobId,t.next=5,this.$api.monitor.enableMonitorApi(this.enableMonitorBody);case 5:if(n=t.sent,r=n.data,console.log(r),200!==r.code){t.next=11;break}return this.getMonitorList(),t.abrupt("return",this.$message.success("修改成功！"));case 11:return t.abrupt("return",this.$message.error("修改失败！"));case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},w=M,v=Object(u["a"])(w,r,o,!1,null,"4e91172a",null);e["default"]=v.exports}}]);
//# sourceMappingURL=chunk-ccebea66.js.map